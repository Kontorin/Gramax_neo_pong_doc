---
order: 7
title: Руководство программиста
---

---
title: Руководство программиста
subtitle: NeoPong - 2D-игра на Python (Pygame)
version: 1.0.0
---

# РУКОВОДСТВО ПРОГРАММИСТА NeoPong

## 1. Назначение и условия применения программы

### 1.1 Назначение

NeoPong представляет собой образовательную 2D-игру, разработанную на языке Python с использованием библиотеки Pygame. Программа реализует классическую игру Pong с добавлением механики мин, взрывающихся при соприкосновении с мячом. Игра предназначена для обучения основам разработки игр, включая управление объектами, физику столкновений, отрисовку графики и обработку пользовательского ввода.

### 1.2 Функции, выполняемые программой

Основные функции программы:

1. **Инициализация игровой среды** — создание окна приложения размером 1268×850 пикселей с частотой обновления 120 кадров в секунду.

2. **Управление объектами игры** — создание и управление состоянием мяча, двух игроков (ракеток), мин, экрана и интерфейса.

3. **Обработка пользовательского ввода** — обработка нажатий клавиш для управления ракетками первого и второго игроков.

4. **Физика игры** — реализация отскока мяча от границ экрана и ракеток, генерация случайного направления мяча при отскоке от ракетки с коэффициентом от 0.5 до 1.5.

5. **Система столкновений** — обнаружение и обработка столкновений мяча с ракетками игроков, мячом с минами, мячом с границами экрана.

6. **Генерация мин** — создание мин на случайных позициях при каждом соприкосновении мяча с ракеткой.

7. **Система подсчёта очков** — отслеживание забитых мячей и отображение текущего счёта обоих игроков.

8. **Отображение игровой информации** — рендеринг позиций всех объектов на экране, отображение текущего счёта в верхней части экрана.

### 1.3 Условия, необходимые для выполнения программы

#### Требования к операционной системе

Программа совместима со следующими операционными системами:
- Windows 7 и выше
- macOS 10.10 и выше
- Linux (Ubuntu 16.04 и выше, Debian, Fedora и другие дистрибутивы с поддержкой Python)

#### Требования к программному обеспечению

Для запуска программы необходимо установить следующее ПО:

1. **Python** — версия 3.7 и выше
2. **Pygame** — версия 2.0 и выше (устанавливается через pip: `pip install pygame`)

#### Требования к оборудованию

- **Процессор** — современный процессор (Intel/AMD) с частотой не менее 1 ГГц
- **Оперативная память** — минимум 256 МБ свободной оперативной памяти
- **Видеокарта** — интегрированная видеокарта с поддержкой 2D-графики (8 МБ видеопамяти)
- **Дисковое пространство** — минимум 100 МБ свободного места для установки зависимостей и запуска программы
- **Монитор** — разрешение экрана минимум 1280×900 пикселей для корректного отображения игровой области

#### Требования к составу периферийных устройств

- Клавиатура (требуется для управления ракетками)
- Монитор (для отображения игры)

#### Другие требования

- Наличие доступа в интернет для установки зависимостей (первоначально)
- Графические ресурсы (PNG-файлы с текстурами) должны быть размещены в папке `assets/` в корневой директории проекта

---

## 2. Характеристики программы

### Основные характеристики

| Характеристика | Значение |
|---|---|
| **Язык программирования** | Python 3.7+ |
| **Графическая библиотека** | Pygame 2.0+ |
| **Разрешение экрана** | 1268×850 пикселей |
| **Частота обновления экрана (FPS)** | 120 кадров в секунду |
| **Режим работы** | Двух-пользовательский локальный мультиплеер |
| **Размер мяча** | 50×50 пикселей |
| **Размер ракетки** | 20×200 пикселей |
| **Размер мины** | 30×30 пикселей |
| **Базовая скорость мяча** | 5 пикселей в кадр |
| **Скорость ракетки** | 10 пикселей в кадр |

### Временные характеристики

- **Время инициализации программы** — менее 2 секунд
- **Время отклика на ввод пользователя** — менее 16.7 мс (один кадр при 60 FPS)
- **Время вычисления физики** — не более 1 мс на итерацию
- **Время отрисовки кадра** — не более 8 мс при 120 FPS

### Особенности программы

1. **Неон-стиль визуализации** — использование тёмного фона с неоновыми цветами для создания современного визуального стиля.

2. **Динамическая генерация препятствий** — мины появляются в случайных позициях на экране при каждом отскоке мяча от ракетки.

3. **Ускорение мяча при взрывах мин** — столкновение мяча с миной ускоряет его скорость в 1.25-2.5 раза в зависимости от текущей скорости.

4. **Случайные вариации траектории** — при отскоке от ракетки мяч изменяет свою траекторию на коэффициент от 0.5 до 1.5, обеспечивая непредсказуемость игры.

5. **Ограничение движения ракеток** — ракетки не могут выходить за пределы игровой области (между строками 218 и 850 пикселей).

6. **Автоматический сброс позиции мяча** — при попадании мяча за границы экрана происходит увеличение счёта соответствующего игрока, сброс позиции и очистка списка мин.

### Режимы работы

Программа работает в следующих режимах:

- **Нормальный режим** — стандартная игровая сессия с двумя игроками, управляемыми с одной клавиатуры
- **Завершение программы** — правильное завершение при закрытии окна приложения с освобождением всех ресурсов

### Средства контроля и восстановления

Программа реализует следующие механизмы контроля:

- **Проверка границ экрана** — мяч и ракетки не выходят за пределы игровой области
- **Контроль столкновений** — система обнаружения столкновений через функцию `colliderect()` из Pygame
- **Обработка событий закрытия окна** — корректное завершение программы при нажатии кнопки закрытия окна
- **Очистка ресурсов** — вызов `pygame.quit()` перед завершением для освобождения памяти

---

## 3. Обращение к программе

### Способ запуска программы

Для запуска программы необходимо выполнить следующую команду в командной строке / терминале:

```bash
python main.py
```

Альтернативные способы запуска:

```bash
python3 main.py
```

```bash
py main.py
```

### Передача управления программе

Программа инициализируется автоматически при запуске файла `main.py`. После инициализации управление передаётся основному игровому циклу, который выполняется следующим образом:

1. Инициализация Pygame и микшера звука (`pygame.init()`, `pygame.mixer.init()`)
2. Создание объектов игровой сцены (экран, мяч, игроки)
3. Запуск основного игрового цикла (`while running:`)
4. Обработка событий пользователя и обновление состояния объектов
5. Отрисовка кадра и обновление экрана
6. При закрытии окна выполняется завершение (`pygame.quit()`)

### Передача параметров данных

Параметры передаются через следующие механизмы:

#### 1. Через глобальные константы (settings.py)

```python
WIDTH = 1268           # Ширина экрана
HEIGHT = 850           # Высота экрана
FPS = 120              # Частота обновления
BALL_SPEED = 5         # Базовая скорость мяча
PADDLE_SPEED = 10      # Скорость ракетки
```

#### 2. Через конструкторы классов

```python
# Инициализация игрока
red_player = Player(red_player_rect, PADDLE_IMG_RED, pygame.K_w, pygame.K_s, 'red')

# Параметры:
# red_player_rect - кортеж (x, y, width, height)
# PADDLE_IMG_RED - объект изображения Pygame
# pygame.K_w, pygame.K_s - коды клавиш для управления
# 'red' - идентификатор цвета игрока
```

#### 3. Через методы объектов

Методы принимают параметры при вызове:

```python
ball.paddle_collision(player_red, player_blue)  # Проверка столкновений с ракетками
ball.mine_collision()                           # Проверка столкновений с минами
ball.draw(screen)                               # Отрисовка мяча на экране
```

### Управление ракетками

Управление осуществляется через клавиатуру:

| Действие | Клавиша (Игрок 1) | Клавиша (Игрок 2) |
|---|---|---|
| Движение вверх | W | Стрелка вверх (↑) |
| Движение вниз | S | Стрелка вниз (↓) |

При нажатии клавиши на ракетке устанавливается скорость, которая применяется до момента отпускания клавиши.

### Завершение программы

Программа завершается следующими способами:

1. **Нажатие кнопки закрытия окна** — стандартная кнопка X в верхнем правом углу окна
2. **Обработка события pygame.QUIT** — программа проверяет событие закрытия окна в основном цикле и устанавливает `running = False`
3. **Вызов pygame.quit()** — освобождение всех ресурсов Pygame перед выходом

---

## 4. Входные данные и выходные данные

### 4.1 Характер, организация и предварительная подготовка входных данных

#### Источники входных данных

Программа получает входные данные из следующих источников:

1. **Пользовательский ввод (события клавиатуры)**
   - События нажатия и отпускания клавиш (pygame.KEYDOWN, pygame.KEYUP)
   - Событие закрытия окна (pygame.QUIT)

2. **Графические ресурсы (файлы PNG)**
   - Текстура фона: `assets/back_neon_1.png`
   - Текстура мяча: `assets/ball_neon_green.png`
   - Текстура ракетки красного игрока: `assets/red.png`
   - Текстура ракетки синего игрока: `assets/blue.png`
   - Текстура мины: `assets/mine_neon_red.png`

3. **Конфигурационные параметры**
   - Загружаются из файла `settings.py`
   - Включают размеры экрана, скорости объектов, коды клавиш

#### Предварительная подготовка данных

Перед началом игры выполняются следующие операции подготовки:

1. Инициализация Pygame: `pygame.init()`
2. Инициализация микшера: `pygame.mixer.init()`
3. Загрузка графических ресурсов (выполняется при импорте settings.py)
4. Масштабирование изображений к нужным размерам через `pygame.transform.scale()`
5. Создание объектов игры (Screen, Ball, Player)

### 4.2 Формат, описание и способ кодирования входных данных

#### События клавиатуры

| Параметр | Тип | Диапазон | Описание |
|---|---|---|---|
| event.type | int | pygame.KEYDOWN, pygame.KEYUP, pygame.QUIT | Тип события |
| event.key | int | pygame.K_w, pygame.K_s, pygame.K_UP, pygame.K_DOWN | Код нажатой/отпущенной клавиши |

#### Графические ресурсы

| Файл | Формат | Размер | Назначение |
|---|---|---|---|
| back_neon_1.png | PNG (RGBA) | 1268×850 | Фоновое изображение |
| ball_neon_green.png | PNG (RGBA) | 50×50 | Текстура мяча |
| red.png | PNG (RGBA) | 20×200 | Ракетка синего игрока |
| blue.png | PNG (RGBA) | 20×200 | Ракетка красного игрока |
| mine_neon_red.png | PNG (RGBA) | 30×30 | Текстура мины |

#### Конфигурационные параметры

```python
# Числовые параметры
WIDTH: int = 1268              # Ширина окна
HEIGHT: int = 850              # Высота окна
FPS: int = 120                  # Частота кадров
BALL_SIZE: int = 50             # Размер мяча
BALL_SPEED: int = 5             # Скорость мяча
PADDLE_WIDTH: int = 20          # Ширина ракетки
PADDLE_HEIGHT: int = 200        # Высота ракетки
PADDLE_SPEED: int = 10          # Скорость ракетки
MINES_SIZE: int = 30            # Размер мины
```

### 4.3 Характер и организация выходных данных

#### Основные выходные данные

Программа выводит следующие данные:

1. **Визуальное представление игры** — графическая сцена, отрисованная на экран
2. **Информация о счёте** — текущее количество забитых мячей для каждого игрока
3. **Состояние объектов** — визуальное отображение мяча, ракеток и мин
4. **Информационное окно Pygame** — выводит название приложения «NEO ping-pong»

#### Организация выходных данных

Выходные данные организованы в виде:

- **Графический буфер** (double buffering) — используется для предотвращения мерцания экрана
- **Координатная система** — все позиции объектов основаны на пиксельных координатах (0,0) в верхнем левом углу
- **Временная синхронизация** — выход обновляется синхронно с частотой 120 FPS

#### Расположение выходной информации на экране

| Элемент | Позиция | Размер | Цвет |
|---|---|---|---|
| Счёт красного игрока (Player 1) | (425, 150) | 80px (шрифт) | Голубой (44, 174, 247) |
| Счёт синего игрока (Player 2) | (1020, 150) | 80px (шрифт) | Красный (191, 19, 21) |
| Мяч | Центр экрана, движется | 50×50 | Неоновый зелёный |
| Ракетка Player 1 | Левый край (x=0) | 20×200 | Синий |
| Ракетка Player 2 | Правый край (x=1248) | 20×200 | Красный |
| Мины | Случайная позиция | 30×30 | Неоновый красный |

### 4.4 Формат, описание и способ кодирования выходных данных

#### Графический вывод

```python
# Отрисовка кадра на экран
screen.blit(image, (x, y))  # Перенос изображения в координаты
pygame.display.flip()        # Обновление экрана (двойная буферизация)
```

#### Текстовый вывод (счёт)

```python
# Рендеринг текста
surface = font.render(str(score), True, (R, G, B))
screen.blit(surface, (x, y))

# Параметры:
# score: int - текущее количество очков
# True - сглаживание текста (antialiasing)
# (R, G, B) - цвет текста в RGB-формате (0-255)
```

#### Координатная система

- **Начало координат** — верхний левый угол экрана (0, 0)
- **Ось X** — горизонтальная, слева направо (0 до 1268)
- **Ось Y** — вертикальная, сверху вниз (0 до 850)
- **Единица измерения** — пиксели

#### Формат пиксельных значений

- **RGB-цвета** — кортежи из трёх целых чисел (R, G, B), каждый в диапазоне 0-255
- **RGBA-цвета** — кортежи из четырёх целых чисел (R, G, B, A) для изображений с альфа-каналом

#### Пример выходных данных

```
Экран 1268×850 пикселей:
┌─────────────────────────────────────────────────────────────────┐
│ Счёт: 3            (синий)              Счёт: 5    (красный)    │
│                                                                   │
│ [Ракетка 1]                    [Мяч]                 [Ракетка 2] │
│     │                            ●                        │      │
│     │            [Мина 1]        │         [Мина 2]       │      │
│     │                  ◊          │              ◊        │      │
│     │                            ◊                        │      │
│     │                         [Мина 3]                    │      │
│     │                                                     │      │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. Сообщения

### 5.1 Сообщения об ошибках

#### 5.1.1 Ошибка при загрузке графических ресурсов

**Текст сообщения:**
```
FileNotFoundError: [Errno 2] No such file or directory: 'assets/back_neon_1.png'
```

**Причина:** Файл изображения не найден в указанном пути.

**Действия пользователя:**
1. Убедитесь, что папка `assets/` находится в том же каталоге, что и файл `main.py`
2. Проверьте наличие всех необходимых PNG-файлов в папке `assets/`
3. Убедитесь в правильности написания имён файлов (чувствительны к регистру на Linux/Mac)
4. Переместите все графические ресурсы в папку `assets/` и повторите запуск

#### 5.1.2 Ошибка импорта модуля Pygame

**Текст сообщения:**
```
ModuleNotFoundError: No module named 'pygame'
```

**Причина:** Библиотека Pygame не установлена в Python окружении.

**Действия пользователя:**
1. Откройте командную строку / терминал
2. Установите Pygame командой: `pip install pygame`
3. Дождитесь завершения установки
4. Повторите запуск программы

#### 5.1.3 Ошибка при импорте settings

**Текст сообщения:**
```
ModuleNotFoundError: No module named 'settings'
```

**Причина:** Файл `settings.py` не находится в одном каталоге с `main.py`.

**Действия пользователя:**
1. Убедитесь, что файл `settings.py` находится в корневой папке проекта
2. Проверьте наличие всех необходимых файлов проекта
3. Переместите `settings.py` в корневую папку и повторите запуск

#### 5.1.4 Ошибка при импорте game_objects

**Текст сообщения:**
```
ModuleNotFoundError: No module named 'game_objects'
```

**Причина:** Файл `game_objects.py` не находится в одном каталоге с `main.py`.

**Действия пользователя:**
1. Убедитесь, что файл `game_objects.py` находится в корневой папке проекта
2. Проверьте наличие всех необходимых файлов проекта
3. Переместите `game_objects.py` в корневую папку и повторите запуск

### 5.2 Информационные сообщения

Программа не выводит специальных информационных сообщений в консоль во время нормальной работы. Однако могут быть выведены стандартные сообщения Pygame.

### 5.3 Сообщения отладки

При включении режима отладки (не входит в стандартную конфигурацию) могут выводиться следующие сообщения:

- **Сообщение о частоте кадров** — текущее значение FPS
- **Сообщение о позициях объектов** — координаты мяча, ракеток, мин
- **Сообщение о столкновениях** — информация о обнаруженных столкновениях

### 5.4 Действия при получении сообщений об ошибках

Общая последовательность действий при получении сообщения об ошибке:

1. **Прочитайте текст ошибки** — определите тип и причину проблемы
2. **Проверьте состояние файлов проекта** — убедитесь в наличии всех необходимых файлов
3. **Проверьте окружение Python** — убедитесь в установке всех зависимостей
4. **Выполните рекомендуемые действия** из описания соответствующей ошибки
5. **Повторите запуск программы** после исправления проблемы
6. **Обратитесь к разработчику** если ошибка повторяется после выполнения всех действий

### 5.5 Коды возврата программы

| Код | Значение | Описание |
|---|---|---|
| 0 | SUCCESS | Программа завершилась успешно |
| 1 | GENERIC_ERROR | Неизвестная ошибка при выполнении |
| 2 | MISSING_RESOURCE | Отсутствует необходимый графический ресурс |
| 3 | IMPORT_ERROR | Ошибка при импорте модуля |

---

## Приложение А. Дополнительные материалы

### А.1 Пример полного игрового цикла

```python
import pygame
from settings import *
from game_objects import *

pygame.init()
pygame.mixer.init()

# Инициализация объектов
game_screen = Screen()
ball = Ball()
red_player = Player(red_player_rect, PADDLE_IMG_RED, pygame.K_w, pygame.K_s, 'red')
blue_player = Player(blue_player_rect, PADDLE_IMG_BLUE, pygame.K_UP, pygame.K_DOWN, 'blue')

# Основной игровой цикл
running = True
while running:
    game_screen.clock.tick(FPS)  # Ограничение частоты кадров
    game_screen.screen.blit(game_screen.img, (0,0))  # Отрисовка фона
    
    # Обработка событий
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        blue_player.check_key(event)
        red_player.check_key(event)
    
    # Обновление физики
    ball.paddle_collision(blue_player, red_player)
    ball.mine_collision()
    game_screen.draw_mine(ball)
    
    # Отрисовка объектов
    blue_player.draw(game_screen.screen)
    red_player.draw(game_screen.screen)
    ball.draw(game_screen.screen)
    game_screen.show_score(blue_player, red_player)
    
    # Обновление экрана
    pygame.display.flip()

pygame.quit()
```

### А.2 Диаграмма архитектуры классов

```
┌─────────────────────────────────────────────────┐
│                  main.py                         │
│  (Инициализация и основной игровой цикл)       │
└───────────────┬─────────────────────────────────┘
                │
        ┌───────┼───────┬──────────────┐
        │       │       │              │
        ▼       ▼       ▼              ▼
      Screen   Ball   Player        Mines
    (Экран)  (Мяч)  (Ракетка)    (Мины)
```

### А.3 Таблица размеров и позиций объектов

| Объект | Координаты | Размер | Граница |
|---|---|---|---|
| Экран | (0, 0) | 1268×850 | Основная граница |
| Фоновое изображение | (0, 0) | 1268×850 | Весь экран |
| Игровая зона | (0, 218) | 1268×632 | Исключая верхнюю зону с счётом |
| Ракетка Player 1 | (0, 325) | 20×200 | Левый край |
| Ракетка Player 2 | (1248, 325) | 20×200 | Правый край |
| Мяч | (609, 425) | 50×50 | Центр (начальная позиция) |
| Счёт Player 1 | (425, 150) | Текст (80px) | Верхняя левая часть |
| Счёт Player 2 | (1020, 150) | Текст (80px) | Верхняя правая часть |

### А.4 Примеры использования основных методов

#### Инициализация экрана
```python
game_screen = Screen()
# Создаёт окно 1268×850, загружает фон, устанавливает название
```

#### Инициализация мяча
```python
ball = Ball()
# Устанавливает позицию в центр экрана, начальную скорость 5 пиксель/кадр
```

#### Инициализация игрока
```python
player = Player(rect, img, key_up, key_down, color)
# rect: (x, y, width, height)
# img: pygame.image
# key_up: pygame.K_w или pygame.K_UP
# key_down: pygame.K_s или pygame.K_DOWN
# color: строка ('red' или 'blue')
```

#### Проверка столкновений
```python
ball.paddle_collision(red_player, blue_player)
# Проверяет столкновения мяча с ракетками и границами
# При попадании мяча за границу увеличивает счёт и сбрасывает позицию

ball.mine_collision()
# Проверяет столкновения мяча с минами и увеличивает скорость мяча
```

---

**Версия документа:** 1.0.0  
**Дата создания:** 19.12.2025  
**Язык документа:** Русский  
**Стандарт:** ГОСТ 19.504-79
